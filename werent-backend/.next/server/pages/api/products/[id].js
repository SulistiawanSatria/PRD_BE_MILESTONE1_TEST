"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products/[id]";
exports.ids = ["pages/api/products/[id]"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_products_id_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\products\\[id].js */ \"(api)/./pages/api/products/[id].js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_id_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_id_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/products/[id]\",\n        pathname: \"/api/products/[id]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_products_id_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb2R1Y3RzJTJGJTVCaWQlNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3Byb2R1Y3RzJTVDJTVCaWQlNUQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZXJlbnQtYmFja2VuZC8/ODBmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHByb2R1Y3RzXFxcXFtpZF0uanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9kdWN0cy9baWRdXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZHVjdHMvW2lkXVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectDB: () => (/* binding */ connectDB)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    try {\n        if (cached.conn) {\n            console.log(\"Using cached MongoDB connection\");\n            return cached.conn;\n        }\n        console.log(\"Connecting to MongoDB...\");\n        console.log(\"MongoDB URI:\", MONGODB_URI.replace(/:[^:]*@/, \":****@\")); // Hide password in logs\n        const opts = {\n            useNewUrlParser: true,\n            useUnifiedTopology: true,\n            maxPoolSize: 10,\n            serverSelectionTimeoutMS: 5000,\n            socketTimeoutMS: 45000\n        };\n        if (!cached.promise) {\n            cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts);\n        }\n        cached.conn = await cached.promise;\n        console.log(\"Successfully connected to MongoDB!\");\n        // Test the connection\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.db.admin().ping();\n        console.log(\"MongoDB connection is healthy (ping successful)\");\n        return cached.conn;\n    } catch (error) {\n        console.error(\"MongoDB connection error:\", {\n            name: error.name,\n            message: error.message,\n            code: error.code,\n            codeName: error.codeName\n        });\n        // Reset cache if connection fails\n        cached.promise = null;\n        cached.conn = null;\n        if (error.name === \"MongoServerSelectionError\") {\n            throw new Error(\"Could not connect to MongoDB. Please check:\\n\" + \"1. Your network connection\\n\" + \"2. MongoDB Atlas IP whitelist (add your current IP)\\n\" + \"3. MongoDB Atlas username and password\\n\" + \"For more details: https://www.mongodb.com/docs/atlas/security-whitelist/\");\n        }\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQSxJQUFJQyxTQUFTQyxPQUFPTixRQUFRO0FBRTVCLElBQUksQ0FBQ0ssUUFBUTtJQUNYQSxTQUFTQyxPQUFPTixRQUFRLEdBQUc7UUFBRU8sTUFBTTtRQUFNQyxTQUFTO0lBQUs7QUFDekQ7QUFFTyxlQUFlQztJQUNwQixJQUFJO1FBQ0YsSUFBSUosT0FBT0UsSUFBSSxFQUFFO1lBQ2ZHLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9OLE9BQU9FLElBQUk7UUFDcEI7UUFFQUcsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQyxnQkFBZ0JWLFlBQVlXLE9BQU8sQ0FBQyxXQUFXLFlBQVksd0JBQXdCO1FBRS9GLE1BQU1DLE9BQU87WUFDWEMsaUJBQWlCO1lBQ2pCQyxvQkFBb0I7WUFDcEJDLGFBQWE7WUFDYkMsMEJBQTBCO1lBQzFCQyxpQkFBaUI7UUFDbkI7UUFFQSxJQUFJLENBQUNiLE9BQU9HLE9BQU8sRUFBRTtZQUNuQkgsT0FBT0csT0FBTyxHQUFHUix1REFBZ0IsQ0FBQ0MsYUFBYVk7UUFDakQ7UUFFQVIsT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87UUFDbENFLFFBQVFDLEdBQUcsQ0FBQztRQUVaLHNCQUFzQjtRQUN0QixNQUFNWCwwREFBbUIsQ0FBQ3FCLEVBQUUsQ0FBQ0MsS0FBSyxHQUFHQyxJQUFJO1FBQ3pDYixRQUFRQyxHQUFHLENBQUM7UUFFWixPQUFPTixPQUFPRSxJQUFJO0lBQ3BCLEVBQUUsT0FBT2lCLE9BQU87UUFDZGQsUUFBUWMsS0FBSyxDQUFDLDZCQUE2QjtZQUN6Q0MsTUFBTUQsTUFBTUMsSUFBSTtZQUNoQkMsU0FBU0YsTUFBTUUsT0FBTztZQUN0QkMsTUFBTUgsTUFBTUcsSUFBSTtZQUNoQkMsVUFBVUosTUFBTUksUUFBUTtRQUMxQjtRQUVBLGtDQUFrQztRQUNsQ3ZCLE9BQU9HLE9BQU8sR0FBRztRQUNqQkgsT0FBT0UsSUFBSSxHQUFHO1FBRWQsSUFBSWlCLE1BQU1DLElBQUksS0FBSyw2QkFBNkI7WUFDOUMsTUFBTSxJQUFJckIsTUFDUixrREFDQSxpQ0FDQSwwREFDQSw2Q0FDQTtRQUVKO1FBRUEsTUFBTW9CO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlcmVudC1iYWNrZW5kLy4vbGliL21vbmdvZGIuanM/ZDkyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuXHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52Jyk7XHJcbn1cclxuXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XHJcblxyXG5pZiAoIWNhY2hlZCkge1xyXG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdERCKCkge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoY2FjaGVkLmNvbm4pIHtcclxuICAgICAgY29uc29sZS5sb2coJ1VzaW5nIGNhY2hlZCBNb25nb0RCIGNvbm5lY3Rpb24nKTtcclxuICAgICAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW5nIHRvIE1vbmdvREIuLi4nKTtcclxuICAgIGNvbnNvbGUubG9nKCdNb25nb0RCIFVSSTonLCBNT05HT0RCX1VSSS5yZXBsYWNlKC86W146XSpALywgJzoqKioqQCcpKTsgLy8gSGlkZSBwYXNzd29yZCBpbiBsb2dzXHJcblxyXG4gICAgY29uc3Qgb3B0cyA9IHtcclxuICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxyXG4gICAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXHJcbiAgICAgIG1heFBvb2xTaXplOiAxMCxcclxuICAgICAgc2VydmVyU2VsZWN0aW9uVGltZW91dE1TOiA1MDAwLFxyXG4gICAgICBzb2NrZXRUaW1lb3V0TVM6IDQ1MDAwLFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIE1vbmdvREIhJyk7XHJcbiAgICBcclxuICAgIC8vIFRlc3QgdGhlIGNvbm5lY3Rpb25cclxuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uZGIuYWRtaW4oKS5waW5nKCk7XHJcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0aW9uIGlzIGhlYWx0aHkgKHBpbmcgc3VjY2Vzc2Z1bCknKTtcclxuXHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCB7XHJcbiAgICAgIG5hbWU6IGVycm9yLm5hbWUsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIGNvZGU6IGVycm9yLmNvZGUsXHJcbiAgICAgIGNvZGVOYW1lOiBlcnJvci5jb2RlTmFtZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUmVzZXQgY2FjaGUgaWYgY29ubmVjdGlvbiBmYWlsc1xyXG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgY2FjaGVkLmNvbm4gPSBudWxsO1xyXG5cclxuICAgIGlmIChlcnJvci5uYW1lID09PSAnTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvcicpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICdDb3VsZCBub3QgY29ubmVjdCB0byBNb25nb0RCLiBQbGVhc2UgY2hlY2s6XFxuJyArXHJcbiAgICAgICAgJzEuIFlvdXIgbmV0d29yayBjb25uZWN0aW9uXFxuJyArXHJcbiAgICAgICAgJzIuIE1vbmdvREIgQXRsYXMgSVAgd2hpdGVsaXN0IChhZGQgeW91ciBjdXJyZW50IElQKVxcbicgK1xyXG4gICAgICAgICczLiBNb25nb0RCIEF0bGFzIHVzZXJuYW1lIGFuZCBwYXNzd29yZFxcbicgK1xyXG4gICAgICAgICdGb3IgbW9yZSBkZXRhaWxzOiBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL2F0bGFzL3NlY3VyaXR5LXdoaXRlbGlzdC8nXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJjb25uZWN0REIiLCJjb25zb2xlIiwibG9nIiwicmVwbGFjZSIsIm9wdHMiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJtYXhQb29sU2l6ZSIsInNlcnZlclNlbGVjdGlvblRpbWVvdXRNUyIsInNvY2tldFRpbWVvdXRNUyIsImNvbm5lY3QiLCJjb25uZWN0aW9uIiwiZGIiLCJhZG1pbiIsInBpbmciLCJlcnJvciIsIm5hbWUiLCJtZXNzYWdlIiwiY29kZSIsImNvZGVOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./models/Product.js":
/*!***************************!*\
  !*** ./models/Product.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst productSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: [\n            true,\n            \"Product name is required\"\n        ],\n        trim: true\n    },\n    description: {\n        type: String,\n        required: [\n            true,\n            \"Product description is required\"\n        ],\n        trim: true\n    },\n    category: {\n        type: String,\n        required: [\n            true,\n            \"Product category is required\"\n        ],\n        enum: [\n            \"dress\",\n            \"top\",\n            \"bottom\",\n            \"outerwear\",\n            \"accessories\"\n        ],\n        trim: true\n    },\n    price: {\n        type: Number,\n        required: [\n            true,\n            \"Product price is required\"\n        ],\n        min: [\n            0,\n            \"Price cannot be negative\"\n        ]\n    },\n    images: [\n        {\n            type: String,\n            validate: {\n                validator: function(v) {\n                    return v.startsWith(\"http://\") || v.startsWith(\"https://\");\n                },\n                message: \"Image URL must be a valid URL\"\n            }\n        }\n    ],\n    sizes: [\n        {\n            type: String,\n            enum: [\n                \"XS\",\n                \"S\",\n                \"M\",\n                \"L\",\n                \"XL\",\n                \"XXL\"\n            ],\n            required: true\n        }\n    ],\n    review_stats: {\n        total_reviews: {\n            type: Number,\n            default: 0\n        },\n        average_rating: {\n            type: Number,\n            default: 0\n        },\n        rating_distribution: {\n            1: {\n                type: Number,\n                default: 0\n            },\n            2: {\n                type: Number,\n                default: 0\n            },\n            3: {\n                type: Number,\n                default: 0\n            },\n            4: {\n                type: Number,\n                default: 0\n            },\n            5: {\n                type: Number,\n                default: 0\n            }\n        },\n        measurement_stats: {\n            waist: {\n                sum: {\n                    type: Number,\n                    default: 0\n                },\n                count: {\n                    type: Number,\n                    default: 0\n                }\n            },\n            bust: {\n                sum: {\n                    type: Number,\n                    default: 0\n                },\n                count: {\n                    type: Number,\n                    default: 0\n                }\n            },\n            hips: {\n                sum: {\n                    type: Number,\n                    default: 0\n                },\n                count: {\n                    type: Number,\n                    default: 0\n                }\n            },\n            height: {\n                sum: {\n                    type: Number,\n                    default: 0\n                },\n                count: {\n                    type: Number,\n                    default: 0\n                }\n            }\n        }\n    },\n    created_at: {\n        type: Date,\n        default: Date.now\n    },\n    updated_at: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: {\n        createdAt: \"created_at\",\n        updatedAt: \"updated_at\"\n    }\n});\n// Method untuk mengupdate statistik review\nproductSchema.methods.updateReviewStats = async function() {\n    const Review = mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Review\");\n    const stats = await Review.aggregate([\n        {\n            $match: {\n                product_id: this._id.toString()\n            }\n        },\n        {\n            $group: {\n                _id: null,\n                total_reviews: {\n                    $sum: 1\n                },\n                average_rating: {\n                    $avg: \"$rating\"\n                },\n                rating_distribution: {\n                    $push: \"$rating\"\n                },\n                waist_sum: {\n                    $sum: \"$user_measurements.waist\"\n                },\n                waist_count: {\n                    $sum: {\n                        $cond: [\n                            {\n                                $ne: [\n                                    \"$user_measurements.waist\",\n                                    null\n                                ]\n                            },\n                            1,\n                            0\n                        ]\n                    }\n                },\n                bust_sum: {\n                    $sum: \"$user_measurements.bust\"\n                },\n                bust_count: {\n                    $sum: {\n                        $cond: [\n                            {\n                                $ne: [\n                                    \"$user_measurements.bust\",\n                                    null\n                                ]\n                            },\n                            1,\n                            0\n                        ]\n                    }\n                },\n                hips_sum: {\n                    $sum: \"$user_measurements.hips\"\n                },\n                hips_count: {\n                    $sum: {\n                        $cond: [\n                            {\n                                $ne: [\n                                    \"$user_measurements.hips\",\n                                    null\n                                ]\n                            },\n                            1,\n                            0\n                        ]\n                    }\n                },\n                height_sum: {\n                    $sum: \"$user_measurements.height\"\n                },\n                height_count: {\n                    $sum: {\n                        $cond: [\n                            {\n                                $ne: [\n                                    \"$user_measurements.height\",\n                                    null\n                                ]\n                            },\n                            1,\n                            0\n                        ]\n                    }\n                }\n            }\n        }\n    ]);\n    if (stats.length > 0) {\n        const stat = stats[0];\n        // Hitung distribusi rating\n        const distribution = {\n            1: 0,\n            2: 0,\n            3: 0,\n            4: 0,\n            5: 0\n        };\n        stat.rating_distribution.forEach((rating)=>{\n            distribution[rating]++;\n        });\n        this.review_stats = {\n            total_reviews: stat.total_reviews,\n            average_rating: stat.average_rating,\n            rating_distribution: distribution,\n            measurement_stats: {\n                waist: {\n                    sum: stat.waist_sum || 0,\n                    count: stat.waist_count || 0\n                },\n                bust: {\n                    sum: stat.bust_sum || 0,\n                    count: stat.bust_count || 0\n                },\n                hips: {\n                    sum: stat.hips_sum || 0,\n                    count: stat.hips_count || 0\n                },\n                height: {\n                    sum: stat.height_sum || 0,\n                    count: stat.height_count || 0\n                }\n            }\n        };\n        await this.save();\n    }\n};\nconst Product = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Product || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Product\", productSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Product);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sQ0FBQ0MsQ0FBQUE7WUFDN0JGLFlBQVksQ0FBQ0UsT0FBTztRQUN4QjtRQUVBLElBQUksQ0FBQy9DLFlBQVksR0FBRztZQUNoQkMsZUFBZTJDLEtBQUszQyxhQUFhO1lBQ2pDRSxnQkFBZ0J5QyxLQUFLekMsY0FBYztZQUNuQ0MscUJBQXFCeUM7WUFDckJ4QyxtQkFBbUI7Z0JBQ2ZDLE9BQU87b0JBQ0hDLEtBQUtxQyxLQUFLWCxTQUFTLElBQUk7b0JBQ3ZCekIsT0FBT29DLEtBQUtWLFdBQVcsSUFBSTtnQkFDL0I7Z0JBQ0F6QixNQUFNO29CQUNGRixLQUFLcUMsS0FBS1AsUUFBUSxJQUFJO29CQUN0QjdCLE9BQU9vQyxLQUFLTixVQUFVLElBQUk7Z0JBQzlCO2dCQUNBNUIsTUFBTTtvQkFDRkgsS0FBS3FDLEtBQUtMLFFBQVEsSUFBSTtvQkFDdEIvQixPQUFPb0MsS0FBS0osVUFBVSxJQUFJO2dCQUM5QjtnQkFDQTdCLFFBQVE7b0JBQ0pKLEtBQUtxQyxLQUFLSCxVQUFVLElBQUk7b0JBQ3hCakMsT0FBT29DLEtBQUtGLFlBQVksSUFBSTtnQkFDaEM7WUFDSjtRQUNKO1FBRUEsTUFBTSxJQUFJLENBQUNNLElBQUk7SUFDbkI7QUFDSjtBQUVBLE1BQU1DLFVBQVV0RSx3REFBZSxDQUFDc0UsT0FBTyxJQUFJdEUscURBQWMsQ0FBQyxXQUFXQztBQUVyRSxpRUFBZXFFLE9BQU9BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZXJlbnQtYmFja2VuZC8uL21vZGVscy9Qcm9kdWN0LmpzPzA5YzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgcHJvZHVjdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIG5hbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogW3RydWUsICdQcm9kdWN0IG5hbWUgaXMgcmVxdWlyZWQnXSxcbiAgICAgICAgdHJpbTogdHJ1ZVxuICAgIH0sXG4gICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogW3RydWUsICdQcm9kdWN0IGRlc2NyaXB0aW9uIGlzIHJlcXVpcmVkJ10sXG4gICAgICAgIHRyaW06IHRydWVcbiAgICB9LFxuICAgIGNhdGVnb3J5OiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnUHJvZHVjdCBjYXRlZ29yeSBpcyByZXF1aXJlZCddLFxuICAgICAgICBlbnVtOiBbJ2RyZXNzJywgJ3RvcCcsICdib3R0b20nLCAnb3V0ZXJ3ZWFyJywgJ2FjY2Vzc29yaWVzJ10sXG4gICAgICAgIHRyaW06IHRydWVcbiAgICB9LFxuICAgIHByaWNlOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnUHJvZHVjdCBwcmljZSBpcyByZXF1aXJlZCddLFxuICAgICAgICBtaW46IFswLCAnUHJpY2UgY2Fubm90IGJlIG5lZ2F0aXZlJ11cbiAgICB9LFxuICAgIGltYWdlczogW3tcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHYuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IHYuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW1hZ2UgVVJMIG11c3QgYmUgYSB2YWxpZCBVUkwnXG4gICAgICAgIH1cbiAgICB9XSxcbiAgICBzaXplczogW3tcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBlbnVtOiBbJ1hTJywgJ1MnLCAnTScsICdMJywgJ1hMJywgJ1hYTCddLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH1dLFxuICAgIHJldmlld19zdGF0czoge1xuICAgICAgICB0b3RhbF9yZXZpZXdzOiB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICBkZWZhdWx0OiAwXG4gICAgICAgIH0sXG4gICAgICAgIGF2ZXJhZ2VfcmF0aW5nOiB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICBkZWZhdWx0OiAwXG4gICAgICAgIH0sXG4gICAgICAgIHJhdGluZ19kaXN0cmlidXRpb246IHtcbiAgICAgICAgICAgIDE6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gICAgICAgICAgICAyOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgICAgICAgICAgMzogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICAgICAgICAgIDQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gICAgICAgICAgICA1OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9XG4gICAgICAgIH0sXG4gICAgICAgIG1lYXN1cmVtZW50X3N0YXRzOiB7XG4gICAgICAgICAgICB3YWlzdDoge1xuICAgICAgICAgICAgICAgIHN1bTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICAgICAgICAgICAgICBjb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1c3Q6IHtcbiAgICAgICAgICAgICAgICBzdW06IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gICAgICAgICAgICAgICAgY291bnQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoaXBzOiB7XG4gICAgICAgICAgICAgICAgc3VtOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgICAgICAgICAgICAgIGNvdW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGVpZ2h0OiB7XG4gICAgICAgICAgICAgICAgc3VtOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgICAgICAgICAgICAgIGNvdW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNyZWF0ZWRfYXQ6IHtcbiAgICAgICAgdHlwZTogRGF0ZSxcbiAgICAgICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgICB9LFxuICAgIHVwZGF0ZWRfYXQ6IHtcbiAgICAgICAgdHlwZTogRGF0ZSxcbiAgICAgICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgICB9XG59LCB7XG4gICAgdGltZXN0YW1wczoge1xuICAgICAgICBjcmVhdGVkQXQ6ICdjcmVhdGVkX2F0JyxcbiAgICAgICAgdXBkYXRlZEF0OiAndXBkYXRlZF9hdCdcbiAgICB9XG59KTtcblxuLy8gTWV0aG9kIHVudHVrIG1lbmd1cGRhdGUgc3RhdGlzdGlrIHJldmlld1xucHJvZHVjdFNjaGVtYS5tZXRob2RzLnVwZGF0ZVJldmlld1N0YXRzID0gYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgUmV2aWV3ID0gbW9uZ29vc2UubW9kZWwoJ1JldmlldycpO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgUmV2aWV3LmFnZ3JlZ2F0ZShbXG4gICAgICAgIHsgJG1hdGNoOiB7IHByb2R1Y3RfaWQ6IHRoaXMuX2lkLnRvU3RyaW5nKCkgfSB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICAgICAgICBfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgdG90YWxfcmV2aWV3czogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgICAgICAgYXZlcmFnZV9yYXRpbmc6IHsgJGF2ZzogJyRyYXRpbmcnIH0sXG4gICAgICAgICAgICAgICAgcmF0aW5nX2Rpc3RyaWJ1dGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAkcHVzaDogJyRyYXRpbmcnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3YWlzdF9zdW06IHsgJHN1bTogJyR1c2VyX21lYXN1cmVtZW50cy53YWlzdCcgfSxcbiAgICAgICAgICAgICAgICB3YWlzdF9jb3VudDogeyBcbiAgICAgICAgICAgICAgICAgICAgJHN1bTogeyAkY29uZDogW3sgJG5lOiBbJyR1c2VyX21lYXN1cmVtZW50cy53YWlzdCcsIG51bGxdIH0sIDEsIDBdIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ1c3Rfc3VtOiB7ICRzdW06ICckdXNlcl9tZWFzdXJlbWVudHMuYnVzdCcgfSxcbiAgICAgICAgICAgICAgICBidXN0X2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICRzdW06IHsgJGNvbmQ6IFt7ICRuZTogWyckdXNlcl9tZWFzdXJlbWVudHMuYnVzdCcsIG51bGxdIH0sIDEsIDBdIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhpcHNfc3VtOiB7ICRzdW06ICckdXNlcl9tZWFzdXJlbWVudHMuaGlwcycgfSxcbiAgICAgICAgICAgICAgICBoaXBzX2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICRzdW06IHsgJGNvbmQ6IFt7ICRuZTogWyckdXNlcl9tZWFzdXJlbWVudHMuaGlwcycsIG51bGxdIH0sIDEsIDBdIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhlaWdodF9zdW06IHsgJHN1bTogJyR1c2VyX21lYXN1cmVtZW50cy5oZWlnaHQnIH0sXG4gICAgICAgICAgICAgICAgaGVpZ2h0X2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICRzdW06IHsgJGNvbmQ6IFt7ICRuZTogWyckdXNlcl9tZWFzdXJlbWVudHMuaGVpZ2h0JywgbnVsbF0gfSwgMSwgMF0gfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIF0pO1xuXG4gICAgaWYgKHN0YXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgc3RhdCA9IHN0YXRzWzBdO1xuICAgICAgICBcbiAgICAgICAgLy8gSGl0dW5nIGRpc3RyaWJ1c2kgcmF0aW5nXG4gICAgICAgIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IHsgMTogMCwgMjogMCwgMzogMCwgNDogMCwgNTogMCB9O1xuICAgICAgICBzdGF0LnJhdGluZ19kaXN0cmlidXRpb24uZm9yRWFjaChyYXRpbmcgPT4ge1xuICAgICAgICAgICAgZGlzdHJpYnV0aW9uW3JhdGluZ10rKztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZXZpZXdfc3RhdHMgPSB7XG4gICAgICAgICAgICB0b3RhbF9yZXZpZXdzOiBzdGF0LnRvdGFsX3Jldmlld3MsXG4gICAgICAgICAgICBhdmVyYWdlX3JhdGluZzogc3RhdC5hdmVyYWdlX3JhdGluZyxcbiAgICAgICAgICAgIHJhdGluZ19kaXN0cmlidXRpb246IGRpc3RyaWJ1dGlvbixcbiAgICAgICAgICAgIG1lYXN1cmVtZW50X3N0YXRzOiB7XG4gICAgICAgICAgICAgICAgd2Fpc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgc3VtOiBzdGF0LndhaXN0X3N1bSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBjb3VudDogc3RhdC53YWlzdF9jb3VudCB8fCAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidXN0OiB7XG4gICAgICAgICAgICAgICAgICAgIHN1bTogc3RhdC5idXN0X3N1bSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBjb3VudDogc3RhdC5idXN0X2NvdW50IHx8IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhpcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3VtOiBzdGF0LmhpcHNfc3VtIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBzdGF0LmhpcHNfY291bnQgfHwgMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB7XG4gICAgICAgICAgICAgICAgICAgIHN1bTogc3RhdC5oZWlnaHRfc3VtIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBzdGF0LmhlaWdodF9jb3VudCB8fCAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZSgpO1xuICAgIH1cbn07XG5cbmNvbnN0IFByb2R1Y3QgPSBtb25nb29zZS5tb2RlbHMuUHJvZHVjdCB8fCBtb25nb29zZS5tb2RlbCgnUHJvZHVjdCcsIHByb2R1Y3RTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBQcm9kdWN0O1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicHJvZHVjdFNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ0cmltIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImVudW0iLCJwcmljZSIsIk51bWJlciIsIm1pbiIsImltYWdlcyIsInZhbGlkYXRlIiwidmFsaWRhdG9yIiwidiIsInN0YXJ0c1dpdGgiLCJtZXNzYWdlIiwic2l6ZXMiLCJyZXZpZXdfc3RhdHMiLCJ0b3RhbF9yZXZpZXdzIiwiZGVmYXVsdCIsImF2ZXJhZ2VfcmF0aW5nIiwicmF0aW5nX2Rpc3RyaWJ1dGlvbiIsIm1lYXN1cmVtZW50X3N0YXRzIiwid2Fpc3QiLCJzdW0iLCJjb3VudCIsImJ1c3QiLCJoaXBzIiwiaGVpZ2h0IiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJub3ciLCJ1cGRhdGVkX2F0IiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1ldGhvZHMiLCJ1cGRhdGVSZXZpZXdTdGF0cyIsIlJldmlldyIsIm1vZGVsIiwic3RhdHMiLCJhZ2dyZWdhdGUiLCIkbWF0Y2giLCJwcm9kdWN0X2lkIiwiX2lkIiwidG9TdHJpbmciLCIkZ3JvdXAiLCIkc3VtIiwiJGF2ZyIsIiRwdXNoIiwid2Fpc3Rfc3VtIiwid2Fpc3RfY291bnQiLCIkY29uZCIsIiRuZSIsImJ1c3Rfc3VtIiwiYnVzdF9jb3VudCIsImhpcHNfc3VtIiwiaGlwc19jb3VudCIsImhlaWdodF9zdW0iLCJoZWlnaHRfY291bnQiLCJsZW5ndGgiLCJzdGF0IiwiZGlzdHJpYnV0aW9uIiwiZm9yRWFjaCIsInJhdGluZyIsInNhdmUiLCJQcm9kdWN0IiwibW9kZWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/Product.js\n");

/***/ }),

/***/ "(api)/./models/Review.js":
/*!**************************!*\
  !*** ./models/Review.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst reviewSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    product_id: {\n        type: String,\n        required: [\n            true,\n            \"Product ID is required\"\n        ],\n        trim: true\n    },\n    user_id: {\n        type: String,\n        required: [\n            true,\n            \"User ID is required\"\n        ],\n        trim: true\n    },\n    rating: {\n        type: Number,\n        required: [\n            true,\n            \"Rating is required\"\n        ],\n        min: [\n            1,\n            \"Rating must be at least 1\"\n        ],\n        max: [\n            5,\n            \"Rating cannot be more than 5\"\n        ]\n    },\n    review_text: {\n        type: String,\n        required: [\n            true,\n            \"Review text is required\"\n        ],\n        trim: true,\n        minlength: [\n            10,\n            \"Review text must be at least 10 characters long\"\n        ]\n    },\n    images: [\n        {\n            type: String,\n            validate: {\n                validator: function(v) {\n                    return v.startsWith(\"http://\") || v.startsWith(\"https://\");\n                },\n                message: \"Image URL must be a valid URL\"\n            }\n        }\n    ],\n    helpful_count: {\n        type: Number,\n        default: 0,\n        min: [\n            0,\n            \"Helpful count cannot be negative\"\n        ]\n    },\n    user_measurements: {\n        waist: {\n            type: Number,\n            min: [\n                50,\n                \"Waist measurement must be at least 50cm\"\n            ],\n            max: [\n                150,\n                \"Waist measurement cannot be more than 150cm\"\n            ]\n        },\n        bust: {\n            type: Number,\n            min: [\n                50,\n                \"Bust measurement must be at least 50cm\"\n            ],\n            max: [\n                150,\n                \"Bust measurement cannot be more than 150cm\"\n            ]\n        },\n        hips: {\n            type: Number,\n            min: [\n                50,\n                \"Hips measurement must be at least 50cm\"\n            ],\n            max: [\n                150,\n                \"Hips measurement cannot be more than 150cm\"\n            ]\n        },\n        height: {\n            type: Number,\n            min: [\n                100,\n                \"Height must be at least 100cm\"\n            ],\n            max: [\n                250,\n                \"Height cannot be more than 250cm\"\n            ]\n        }\n    },\n    created_at: {\n        type: Date,\n        default: Date.now\n    },\n    updated_at: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: {\n        createdAt: \"created_at\",\n        updatedAt: \"updated_at\"\n    }\n});\n// Middleware untuk memastikan updated_at selalu diupdate\nreviewSchema.pre(\"save\", function(next) {\n    this.updated_at = new Date();\n    next();\n});\n// Static method untuk mendapatkan statistik review\nreviewSchema.statics.getReviewStats = async function(productId) {\n    const stats = await this.aggregate([\n        {\n            $match: {\n                product_id: productId\n            }\n        },\n        {\n            $group: {\n                _id: null,\n                averageRating: {\n                    $avg: \"$rating\"\n                },\n                totalReviews: {\n                    $sum: 1\n                },\n                ratingDistribution: {\n                    $push: \"$rating\"\n                }\n            }\n        }\n    ]);\n    return stats[0] || {\n        averageRating: 0,\n        totalReviews: 0,\n        ratingDistribution: []\n    };\n};\nconst Review = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Review || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Review\", reviewSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Review);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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anM/YzJjNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCByZXZpZXdTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBwcm9kdWN0X2lkOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnUHJvZHVjdCBJRCBpcyByZXF1aXJlZCddLFxuICAgICAgICB0cmltOiB0cnVlXG4gICAgfSxcbiAgICB1c2VyX2lkOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlciBJRCBpcyByZXF1aXJlZCddLFxuICAgICAgICB0cmltOiB0cnVlXG4gICAgfSxcbiAgICByYXRpbmc6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICByZXF1aXJlZDogW3RydWUsICdSYXRpbmcgaXMgcmVxdWlyZWQnXSxcbiAgICAgICAgbWluOiBbMSwgJ1JhdGluZyBtdXN0IGJlIGF0IGxlYXN0IDEnXSxcbiAgICAgICAgbWF4OiBbNSwgJ1JhdGluZyBjYW5ub3QgYmUgbW9yZSB0aGFuIDUnXVxuICAgIH0sXG4gICAgcmV2aWV3X3RleHQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogW3RydWUsICdSZXZpZXcgdGV4dCBpcyByZXF1aXJlZCddLFxuICAgICAgICB0cmltOiB0cnVlLFxuICAgICAgICBtaW5sZW5ndGg6IFsxMCwgJ1JldmlldyB0ZXh0IG11c3QgYmUgYXQgbGVhc3QgMTAgY2hhcmFjdGVycyBsb25nJ11cbiAgICB9LFxuICAgIGltYWdlczogW3tcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHYuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IHYuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW1hZ2UgVVJMIG11c3QgYmUgYSB2YWxpZCBVUkwnXG4gICAgICAgIH1cbiAgICB9XSxcbiAgICBoZWxwZnVsX2NvdW50OiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgbWluOiBbMCwgJ0hlbHBmdWwgY291bnQgY2Fubm90IGJlIG5lZ2F0aXZlJ11cbiAgICB9LFxuICAgIHVzZXJfbWVhc3VyZW1lbnRzOiB7XG4gICAgICAgIHdhaXN0OiB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICBtaW46IFs1MCwgJ1dhaXN0IG1lYXN1cmVtZW50IG11c3QgYmUgYXQgbGVhc3QgNTBjbSddLFxuICAgICAgICAgICAgbWF4OiBbMTUwLCAnV2Fpc3QgbWVhc3VyZW1lbnQgY2Fubm90IGJlIG1vcmUgdGhhbiAxNTBjbSddXG4gICAgICAgIH0sXG4gICAgICAgIGJ1c3Q6IHtcbiAgICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICAgIG1pbjogWzUwLCAnQnVzdCBtZWFzdXJlbWVudCBtdXN0IGJlIGF0IGxlYXN0IDUwY20nXSxcbiAgICAgICAgICAgIG1heDogWzE1MCwgJ0J1c3QgbWVhc3VyZW1lbnQgY2Fubm90IGJlIG1vcmUgdGhhbiAxNTBjbSddXG4gICAgICAgIH0sXG4gICAgICAgIGhpcHM6IHtcbiAgICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICAgIG1pbjogWzUwLCAnSGlwcyBtZWFzdXJlbWVudCBtdXN0IGJlIGF0IGxlYXN0IDUwY20nXSxcbiAgICAgICAgICAgIG1heDogWzE1MCwgJ0hpcHMgbWVhc3VyZW1lbnQgY2Fubm90IGJlIG1vcmUgdGhhbiAxNTBjbSddXG4gICAgICAgIH0sXG4gICAgICAgIGhlaWdodDoge1xuICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgICAgbWluOiBbMTAwLCAnSGVpZ2h0IG11c3QgYmUgYXQgbGVhc3QgMTAwY20nXSxcbiAgICAgICAgICAgIG1heDogWzI1MCwgJ0hlaWdodCBjYW5ub3QgYmUgbW9yZSB0aGFuIDI1MGNtJ11cbiAgICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlZF9hdDoge1xuICAgICAgICB0eXBlOiBEYXRlLFxuICAgICAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgICB9LFxuICAgIHVwZGF0ZWRfYXQ6IHtcbiAgICAgICAgdHlwZTogRGF0ZSxcbiAgICAgICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gICAgfSxcbn0sIHtcbiAgICB0aW1lc3RhbXBzOiB7XG4gICAgICAgIGNyZWF0ZWRBdDogJ2NyZWF0ZWRfYXQnLFxuICAgICAgICB1cGRhdGVkQXQ6ICd1cGRhdGVkX2F0J1xuICAgIH1cbn0pO1xuXG4vLyBNaWRkbGV3YXJlIHVudHVrIG1lbWFzdGlrYW4gdXBkYXRlZF9hdCBzZWxhbHUgZGl1cGRhdGVcbnJldmlld1NjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XG4gICAgdGhpcy51cGRhdGVkX2F0ID0gbmV3IERhdGUoKTtcbiAgICBuZXh0KCk7XG59KTtcblxuLy8gU3RhdGljIG1ldGhvZCB1bnR1ayBtZW5kYXBhdGthbiBzdGF0aXN0aWsgcmV2aWV3XG5yZXZpZXdTY2hlbWEuc3RhdGljcy5nZXRSZXZpZXdTdGF0cyA9IGFzeW5jIGZ1bmN0aW9uKHByb2R1Y3RJZCkge1xuICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgdGhpcy5hZ2dyZWdhdGUoW1xuICAgICAgICB7ICRtYXRjaDogeyBwcm9kdWN0X2lkOiBwcm9kdWN0SWQgfSB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICAgICAgICBfaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgYXZlcmFnZVJhdGluZzogeyAkYXZnOiAnJHJhdGluZycgfSxcbiAgICAgICAgICAgICAgICB0b3RhbFJldmlld3M6IHsgJHN1bTogMSB9LFxuICAgICAgICAgICAgICAgIHJhdGluZ0Rpc3RyaWJ1dGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAkcHVzaDogJyRyYXRpbmcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXSk7XG5cbiAgICByZXR1cm4gc3RhdHNbMF0gfHwge1xuICAgICAgICBhdmVyYWdlUmF0aW5nOiAwLFxuICAgICAgICB0b3RhbFJldmlld3M6IDAsXG4gICAgICAgIHJhdGluZ0Rpc3RyaWJ1dGlvbjogW11cbiAgICB9O1xufTtcblxuY29uc3QgUmV2aWV3ID0gbW9uZ29vc2UubW9kZWxzLlJldmlldyB8fCBtb25nb29zZS5tb2RlbCgnUmV2aWV3JywgcmV2aWV3U2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgUmV2aWV3O1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmV2aWV3U2NoZW1hIiwiU2NoZW1hIiwicHJvZHVjdF9pZCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInRyaW0iLCJ1c2VyX2lkIiwicmF0aW5nIiwiTnVtYmVyIiwibWluIiwibWF4IiwicmV2aWV3X3RleHQiLCJtaW5sZW5ndGgiLCJpbWFnZXMiLCJ2YWxpZGF0ZSIsInZhbGlkYXRvciIsInYiLCJzdGFydHNXaXRoIiwibWVzc2FnZSIsImhlbHBmdWxfY291bnQiLCJkZWZhdWx0IiwidXNlcl9tZWFzdXJlbWVudHMiLCJ3YWlzdCIsImJ1c3QiLCJoaXBzIiwiaGVpZ2h0IiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJub3ciLCJ1cGRhdGVkX2F0IiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInByZSIsIm5leHQiLCJzdGF0aWNzIiwiZ2V0UmV2aWV3U3RhdHMiLCJwcm9kdWN0SWQiLCJzdGF0cyIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsIiRncm91cCIsIl9pZCIsImF2ZXJhZ2VSYXRpbmciLCIkYXZnIiwidG90YWxSZXZpZXdzIiwiJHN1bSIsInJhdGluZ0Rpc3RyaWJ1dGlvbiIsIiRwdXNoIiwiUmV2aWV3IiwibW9kZWxzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/Review.js\n");

/***/ }),

/***/ "(api)/./pages/api/products/[id].js":
/*!************************************!*\
  !*** ./pages/api/products/[id].js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(api)/./lib/mongodb.js\");\n/* harmony import */ var _models_Product__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/Product */ \"(api)/./models/Product.js\");\n/* harmony import */ var _models_Review__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/Review */ \"(api)/./models/Review.js\");\n\n\n\nasync function handler(req, res) {\n    await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.connectDB)();\n    const { id } = req.query;\n    switch(req.method){\n        case \"GET\":\n            try {\n                const product = await _models_Product__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id);\n                if (!product) {\n                    return res.status(404).json({\n                        success: false,\n                        message: \"Product not found\"\n                    });\n                }\n                // Get review stats\n                const reviews = await _models_Review__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find({\n                    product_id: id\n                });\n                const stats = {\n                    total_reviews: reviews.length,\n                    average_rating: reviews.length > 0 ? reviews.reduce((sum, review)=>sum + review.rating, 0) / reviews.length : 0,\n                    rating_distribution: {\n                        1: reviews.filter((r)=>r.rating === 1).length,\n                        2: reviews.filter((r)=>r.rating === 2).length,\n                        3: reviews.filter((r)=>r.rating === 3).length,\n                        4: reviews.filter((r)=>r.rating === 4).length,\n                        5: reviews.filter((r)=>r.rating === 5).length\n                    }\n                };\n                res.status(200).json({\n                    success: true,\n                    data: {\n                        product,\n                        stats\n                    }\n                });\n            } catch (error) {\n                res.status(500).json({\n                    success: false,\n                    message: error.message\n                });\n            }\n            break;\n        default:\n            res.setHeader(\"Allow\", [\n                \"GET\"\n            ]);\n            res.status(405).json({\n                success: false,\n                message: `Method ${req.method} Not Allowed`\n            });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcHJvZHVjdHMvW2lkXS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlEO0FBQ0g7QUFDRjtBQUU3QixlQUFlRyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsTUFBTUwsdURBQVNBO0lBQ2YsTUFBTSxFQUFFTSxFQUFFLEVBQUUsR0FBR0YsSUFBSUcsS0FBSztJQUV4QixPQUFRSCxJQUFJSSxNQUFNO1FBQ2hCLEtBQUs7WUFDSCxJQUFJO2dCQUNGLE1BQU1DLFVBQVUsTUFBTVIsZ0VBQWdCLENBQUNLO2dCQUN2QyxJQUFJLENBQUNHLFNBQVM7b0JBQ1osT0FBT0osSUFBSU0sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzt3QkFDMUJDLFNBQVM7d0JBQ1RDLFNBQVM7b0JBQ1g7Z0JBQ0Y7Z0JBRUEsbUJBQW1CO2dCQUNuQixNQUFNQyxVQUFVLE1BQU1iLDJEQUFXLENBQUM7b0JBQUVlLFlBQVlYO2dCQUFHO2dCQUNuRCxNQUFNWSxRQUFRO29CQUNaQyxlQUFlSixRQUFRSyxNQUFNO29CQUM3QkMsZ0JBQWdCTixRQUFRSyxNQUFNLEdBQUcsSUFDN0JMLFFBQVFPLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxTQUFXRCxNQUFNQyxPQUFPQyxNQUFNLEVBQUUsS0FBS1YsUUFBUUssTUFBTSxHQUN4RTtvQkFDSk0scUJBQXFCO3dCQUNuQixHQUFHWCxRQUFRWSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVILE1BQU0sS0FBSyxHQUFHTCxNQUFNO3dCQUM3QyxHQUFHTCxRQUFRWSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVILE1BQU0sS0FBSyxHQUFHTCxNQUFNO3dCQUM3QyxHQUFHTCxRQUFRWSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVILE1BQU0sS0FBSyxHQUFHTCxNQUFNO3dCQUM3QyxHQUFHTCxRQUFRWSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVILE1BQU0sS0FBSyxHQUFHTCxNQUFNO3dCQUM3QyxHQUFHTCxRQUFRWSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVILE1BQU0sS0FBSyxHQUFHTCxNQUFNO29CQUMvQztnQkFDRjtnQkFFQWYsSUFBSU0sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDbkJDLFNBQVM7b0JBQ1RnQixNQUFNO3dCQUNKcEI7d0JBQ0FTO29CQUNGO2dCQUNGO1lBQ0YsRUFBRSxPQUFPWSxPQUFPO2dCQUNkekIsSUFBSU0sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDbkJDLFNBQVM7b0JBQ1RDLFNBQVNnQixNQUFNaEIsT0FBTztnQkFDeEI7WUFDRjtZQUNBO1FBRUY7WUFDRVQsSUFBSTBCLFNBQVMsQ0FBQyxTQUFTO2dCQUFDO2FBQU07WUFDOUIxQixJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUNuQkMsU0FBUztnQkFDVEMsU0FBUyxDQUFDLE9BQU8sRUFBRVYsSUFBSUksTUFBTSxDQUFDLFlBQVksQ0FBQztZQUM3QztJQUNKO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZXJlbnQtYmFja2VuZC8uL3BhZ2VzL2FwaS9wcm9kdWN0cy9baWRdLmpzPzgyZTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdERCIH0gZnJvbSAnLi4vLi4vLi4vbGliL21vbmdvZGInO1xyXG5pbXBvcnQgUHJvZHVjdCBmcm9tICcuLi8uLi8uLi9tb2RlbHMvUHJvZHVjdCc7XHJcbmltcG9ydCBSZXZpZXcgZnJvbSAnLi4vLi4vLi4vbW9kZWxzL1Jldmlldyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgYXdhaXQgY29ubmVjdERCKCk7XHJcbiAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcclxuICAgIGNhc2UgJ0dFVCc6XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQoaWQpO1xyXG4gICAgICAgIGlmICghcHJvZHVjdCkge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IG5vdCBmb3VuZCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IHJldmlldyBzdGF0c1xyXG4gICAgICAgIGNvbnN0IHJldmlld3MgPSBhd2FpdCBSZXZpZXcuZmluZCh7IHByb2R1Y3RfaWQ6IGlkIH0pO1xyXG4gICAgICAgIGNvbnN0IHN0YXRzID0ge1xyXG4gICAgICAgICAgdG90YWxfcmV2aWV3czogcmV2aWV3cy5sZW5ndGgsXHJcbiAgICAgICAgICBhdmVyYWdlX3JhdGluZzogcmV2aWV3cy5sZW5ndGggPiAwIFxyXG4gICAgICAgICAgICA/IHJldmlld3MucmVkdWNlKChzdW0sIHJldmlldykgPT4gc3VtICsgcmV2aWV3LnJhdGluZywgMCkgLyByZXZpZXdzLmxlbmd0aCBcclxuICAgICAgICAgICAgOiAwLFxyXG4gICAgICAgICAgcmF0aW5nX2Rpc3RyaWJ1dGlvbjoge1xyXG4gICAgICAgICAgICAxOiByZXZpZXdzLmZpbHRlcihyID0+IHIucmF0aW5nID09PSAxKS5sZW5ndGgsXHJcbiAgICAgICAgICAgIDI6IHJldmlld3MuZmlsdGVyKHIgPT4gci5yYXRpbmcgPT09IDIpLmxlbmd0aCxcclxuICAgICAgICAgICAgMzogcmV2aWV3cy5maWx0ZXIociA9PiByLnJhdGluZyA9PT0gMykubGVuZ3RoLFxyXG4gICAgICAgICAgICA0OiByZXZpZXdzLmZpbHRlcihyID0+IHIucmF0aW5nID09PSA0KS5sZW5ndGgsXHJcbiAgICAgICAgICAgIDU6IHJldmlld3MuZmlsdGVyKHIgPT4gci5yYXRpbmcgPT09IDUpLmxlbmd0aCxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBwcm9kdWN0LFxyXG4gICAgICAgICAgICBzdGF0c1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGJyZWFrO1xyXG5cclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnXSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgXHJcbiAgICAgIH0pO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiY29ubmVjdERCIiwiUHJvZHVjdCIsIlJldmlldyIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJpZCIsInF1ZXJ5IiwibWV0aG9kIiwicHJvZHVjdCIsImZpbmRCeUlkIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwicmV2aWV3cyIsImZpbmQiLCJwcm9kdWN0X2lkIiwic3RhdHMiLCJ0b3RhbF9yZXZpZXdzIiwibGVuZ3RoIiwiYXZlcmFnZV9yYXRpbmciLCJyZWR1Y2UiLCJzdW0iLCJyZXZpZXciLCJyYXRpbmciLCJyYXRpbmdfZGlzdHJpYnV0aW9uIiwiZmlsdGVyIiwiciIsImRhdGEiLCJlcnJvciIsInNldEhlYWRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/products/[id].js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();